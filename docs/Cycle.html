<html>
<head><title>trading-cycles</title><meta charset="utf-8"></head>
<body><h1><a name="module-cycle-6218"></a>Module Cycle</h1>
<h2>Templates</h2>
<p><a name="type-cycle-cycle-39369"></a><strong>template</strong> <a href="#type-cycle-cycle-39369">Cycle</a></p>
<blockquote>
<p>A Cycle of trades, that if valid can be performed</p>
<table>
<thead>
<tr>
<th align="left">Field</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">transfers</td>
<td align="left">[<a href="#type-cycle-classtransfer-9450">ClassTransfer</a>]</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">matchingSwaps</td>
<td align="left">Map <a href="#type-cycle-classtransfer-9450">ClassTransfer</a> (ContractId <a href="ClassSwap.html#type-classswap-classswap-72105">ClassSwap</a>)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">registrar</td>
<td align="left">Party</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<ul>
<li>
<p><strong>Choice Archive</strong></p>
<p>(no fields)</p>
</li>
<li>
<p><strong>Choice TryExecute</strong></p>
<p>(no fields)</p>
</li>
</ul>
</blockquote>
<p><a name="type-cycle-cyclepending-36783"></a><strong>template</strong> <a href="#type-cycle-cyclepending-36783">CyclePending</a></p>
<blockquote>
<p>A contract for making a cycle once each
ClassTransfer has a corresponding ContractId ClassSwap
and all the signatories have been added to haveSigned
(including the registrar)</p>
<table>
<thead>
<tr>
<th align="left">Field</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">cycle</td>
<td align="left"><a href="#type-cycle-cycle-39369">Cycle</a></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">haveSigned</td>
<td align="left">Set Party</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<ul>
<li>
<p><strong>Choice Archive</strong></p>
<p>(no fields)</p>
</li>
<li>
<p><strong>Choice CyclePending_Abort</strong></p>
<table>
<thead>
<tr>
<th align="left">Field</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">party</td>
<td align="left">Party</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><strong>Choice CyclePending_Finalize</strong></p>
<p>(no fields)</p>
</li>
<li>
<p><strong>Choice CyclePending_RegistrarSign</strong></p>
<p>(no fields)</p>
</li>
<li>
<p><strong>Choice CyclePending_TransferSign</strong></p>
<table>
<thead>
<tr>
<th align="left">Field</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">witness</td>
<td align="left"><a href="#type-cycle-transferwitness-69795">TransferWitness</a></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</li>
</ul>
</blockquote>
<h2>Data Types</h2>
<p><a name="type-cycle-classtransfer-9450"></a><strong>data</strong> <a href="#type-cycle-classtransfer-9450">ClassTransfer</a></p>
<blockquote>
<p>Cycle Workflow</p>
<ol>
<li>Some student creates a cycle proposal holding a cycle contract with all the
expected trades</li>
<li>All students sign off, once per transfer they are involved in,
and add their corresponding ClassSwap.</li>
<li>The registrar makes a Cycle</li>
<li>The registrar trys to execute the Cycle and if it fails, just archives it
A lightweight represenation of a student's
transfer of losing a class they have and gaining
a class they want</li>
</ol>
<p><a name="constr-cycle-classtransfer-61329"></a><a href="#constr-cycle-classtransfer-61329">ClassTransfer</a></p>
<blockquote>
<table>
<thead>
<tr>
<th align="left">Field</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">student</td>
<td align="left"><a href="Data-Student.html#type-data-student-student-55208">Student</a></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">have</td>
<td align="left"><a href="Class.html#type-class-classkey-47315">ClassKey</a></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">want</td>
<td align="left"><a href="Class.html#type-class-classkey-47315">ClassKey</a></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</blockquote>
<p><strong>instance</strong> Eq <a href="#type-cycle-classtransfer-9450">ClassTransfer</a></p>
<p><strong>instance</strong> Ord <a href="#type-cycle-classtransfer-9450">ClassTransfer</a></p>
<p><strong>instance</strong> Show <a href="#type-cycle-classtransfer-9450">ClassTransfer</a></p>
<p><strong>instance</strong> HasField &quot;have&quot; <a href="#type-cycle-classtransfer-9450">ClassTransfer</a> <a href="Class.html#type-class-classkey-47315">ClassKey</a></p>
<p><strong>instance</strong> HasField &quot;matchingSwaps&quot; <a href="#type-cycle-cycle-39369">Cycle</a> (Map <a href="#type-cycle-classtransfer-9450">ClassTransfer</a> (ContractId <a href="ClassSwap.html#type-classswap-classswap-72105">ClassSwap</a>))</p>
<p><strong>instance</strong> HasField &quot;student&quot; <a href="#type-cycle-classtransfer-9450">ClassTransfer</a> <a href="Data-Student.html#type-data-student-student-55208">Student</a></p>
<p><strong>instance</strong> HasField &quot;transfer&quot; <a href="#type-cycle-transferwitness-69795">TransferWitness</a> <a href="#type-cycle-classtransfer-9450">ClassTransfer</a></p>
<p><strong>instance</strong> HasField &quot;transfers&quot; <a href="#type-cycle-cycle-39369">Cycle</a> [<a href="#type-cycle-classtransfer-9450">ClassTransfer</a>]</p>
<p><strong>instance</strong> HasField &quot;want&quot; <a href="#type-cycle-classtransfer-9450">ClassTransfer</a> <a href="Class.html#type-class-classkey-47315">ClassKey</a></p>
</blockquote>
<p><a name="type-cycle-transferwitness-69795"></a><strong>data</strong> <a href="#type-cycle-transferwitness-69795">TransferWitness</a></p>
<blockquote>
<p>A witness by which a ClassTransfer is validated
It is checked when added to a cycle, so students in a cycle
can be sure that when anyone joins, they aren't joining
in a dishonest way</p>
<p><a name="constr-cycle-transferwitness-72100"></a><a href="#constr-cycle-transferwitness-72100">TransferWitness</a></p>
<blockquote>
<table>
<thead>
<tr>
<th align="left">Field</th>
<th align="left">Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">swapId</td>
<td align="left">ContractId <a href="ClassSwap.html#type-classswap-classswap-72105">ClassSwap</a></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">transfer</td>
<td align="left"><a href="#type-cycle-classtransfer-9450">ClassTransfer</a></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</blockquote>
<p><strong>instance</strong> Eq <a href="#type-cycle-transferwitness-69795">TransferWitness</a></p>
<p><strong>instance</strong> Ord <a href="#type-cycle-transferwitness-69795">TransferWitness</a></p>
<p><strong>instance</strong> Show <a href="#type-cycle-transferwitness-69795">TransferWitness</a></p>
<p><strong>instance</strong> HasField &quot;swapId&quot; <a href="#type-cycle-transferwitness-69795">TransferWitness</a> (ContractId <a href="ClassSwap.html#type-classswap-classswap-72105">ClassSwap</a>)</p>
<p><strong>instance</strong> HasField &quot;transfer&quot; <a href="#type-cycle-transferwitness-69795">TransferWitness</a> <a href="#type-cycle-classtransfer-9450">ClassTransfer</a></p>
<p><strong>instance</strong> HasField &quot;witness&quot; CyclePending_TransferSign <a href="#type-cycle-transferwitness-69795">TransferWitness</a></p>
</blockquote>
</body>
</html>
